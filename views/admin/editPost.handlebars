<div class="sec"><h1>Editar Post</h1></div>
{{#each erros}}
    <div class="alerta alerta-erro">{{desc}}</div>
{{/each}}
<section class="sec"  style="padding-bottom: 15%;">
        <form action="/admin/posts/edit" method="post" class="formulario">
            <input type="hidden" name="id" value="{{post._id}}">
            <label for="titulo">Título: </label>
                <input type="text" id="titulo" name="titulo" value="{{post.titulo}}">
            <label for="preTexto">Pré-View: </label>
                <input type="text" id="preTexto" name="preTexto" placeholder="Breve descrição que aparecerá na aba Blog">
            <label for="texto">Post: </label>
                <textarea name="texto" id="texto" rows="5" placeholder="Post"></textarea>
            <br>
            <img src="{{post.imagem}}" id="imgPreView" style="width:20%">
            <input type="file" onchange="encodeImageFileAsURL(this)" accept="image/*">
            <input type="hidden" id="imagem" name="imagem">

            <button onclick="formFunction(event)" type="submit" class="btn btn-ok">Criar Post</button>
        </form> 
</section>

<script>
    function encodeImageFileAsURL(element) {
        const file = element.files[0];
        const reader = new FileReader();

        reader.onloadend = function() {
            const imagemPreView = document.getElementById("imgPreView");
            const imagem = document.getElementById("imagem");
            imagem.value = reader.result;
            imagemPreView.src = reader.result;
        }
        reader.readAsDataURL(file);
    }
</script>
